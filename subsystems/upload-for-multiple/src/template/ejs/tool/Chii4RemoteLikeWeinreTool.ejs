<!--
Project: upload-for-multiple
FileDirPath: src/template/ejs/tool/Chii4RemoteLikeWeinreTool.ejs
Author: 12278
Email: 1227839175@qq.com
IDE: WebStorm
CreateDate: 2024-1-1 00:00:00 星期一
-->
<!--
动态插入到页面的远端调式工具(chii)的JS代码。
具体见：notes/其他笔记/远程调试工具chii的使用.txt。
-->
<% if( chii4RemoteLikeWeinreTool !== null && chii4RemoteLikeWeinreTool !== undefined && Object.prototype.toString.call( chii4RemoteLikeWeinreTool ) === '[object Object]' && chii4RemoteLikeWeinreTool.isEnable === true){ %>
    <%
        const chii4RemoteLikeWeinreRemoteAddr = Object.prototype.toString.call( chii4RemoteLikeWeinreTool.Chii4RemoteLikeWeinreRemoteAddr ) === '[object String]' && chii4RemoteLikeWeinreTool.Chii4RemoteLikeWeinreRemoteAddr.trim().length > 0
                                                ? chii4RemoteLikeWeinreTool.Chii4RemoteLikeWeinreRemoteAddr.trim()
                                                : '';
    %>

    <script>
      'use strict';

      var chiiScriptElement = document.createElement( 'script' );

      chiiScriptElement.setAttribute( 'defer', 'defer' );

      <% if( chii4RemoteLikeWeinreRemoteAddr ){ %>
      chiiScriptElement.src = '<%= chii4RemoteLikeWeinreRemoteAddr %>/target.js';
      <% } else { %>
      chiiScriptElement.src = '//' + location.hostname + ':<%= chii4RemoteLikeWeinreTool.Chii4RemoteLikeWeinreLocalPort %>/target.js';
      <% } %>

      document.body.appendChild( chiiScriptElement );
    </script>
<% } %>
